import{_ as Re,r as l,v as x,a0 as Oe,b as Te,g as u,o as k,c as D,i as n,f as e,w as s,F as We,C as Ye,l as te,m as ne,e as i,H as S,at as oe,as as se,av as le,au as re,n as Be,a2 as ie,aJ as Ee,aK as Xe,x as ce,aw as Ne,t as je}from"./index-Bz8aCySx.js";import{e as Ke}from"./empty-X662_Asi.js";import"./swiper-LA7WfxAj.js";import{s as h,I as m,J as Ve,K as Fe}from"./useOrderInfo-oTm2EOs0.js";/* empty css             *//* empty css                   *//* empty css                   */const He={class:"baseInfo-container"},Je={key:0,class:"leftPart"},Ze={class:"contentMain"},Ue={class:"imageContainer"},qe=["src"],Ae={class:"image-custom-navigation"},Ge={class:"numberBox"},Qe={class:"image-pagination-custom"},ea={class:"iconBox"},L=.5,R=3,O=.2,aa={__name:"standardPhotoTemplate",setup(ta){const y=l(null),{proxy:C}=je(),{standard_photo:de}=C.useDict("standard_photo"),p=l(!1),v=l(0),ue=l(null),ve=l(null),c=l(1),_=l(0),w=l(0),I=l(0),T=l(0),W=l(0),Y=l(0),B=l(0),g=l(!1),me=x(()=>({transform:`translate(${w.value}px, ${I.value}px)`})),_e=x(()=>({transform:`scale(${c.value}) rotate(${_.value}deg)`,transition:g.value?"none":"transform 0.2s ease"})),E=x(()=>{var a,o;return!(((o=(a=h)==null?void 0:a.value)==null?void 0:o.length)>0)||v.value<=0}),X=x(()=>{var o,d;const a=((d=(o=h)==null?void 0:o.value)==null?void 0:d.length)||0;return!(a>0)||v.value>=a-1}),fe=()=>{if(E.value)return;const a=v.value-1;v.value=a,z(h.value[a])},he=()=>{if(X.value)return;const a=v.value+1;v.value=a,z(h.value[a])};l(null);const pe=()=>{y.value&&y.value.showPreview()},z=a=>{C.$modal.loading("加载中..."),Ve(a).then(o=>{o!=null&&o.col&&Fe(a),C.$modal.closeLoading()}).catch(()=>{C.$modal.closeLoading()})},ge=()=>{p.value=!p.value},ke=()=>{p.value&&(p.value=!1)},Ce=()=>{K()},we=a=>{a.preventDefault();const o=a.deltaY>0?-.2:O,d=c.value+o;d>=L&&d<=R&&(c.value=d)},Ie=()=>{c.value<R&&(c.value=Math.min(c.value+O,R))},Pe=()=>{c.value>L&&(c.value=Math.max(c.value-O,L))},xe=()=>{_.value=(_.value-90)%360},Se=()=>{_.value=(_.value+90)%360},ye=a=>{g.value=!0,T.value=a.clientX,W.value=a.clientY,Y.value=w.value,B.value=I.value,document.addEventListener("mousemove",N),document.addEventListener("mouseup",j),a.preventDefault()},N=a=>{if(!g.value)return;const o=a.clientX-T.value,d=a.clientY-W.value;w.value=Y.value+o,I.value=B.value+d},j=()=>{g.value=!1,document.removeEventListener("mousemove",N),document.removeEventListener("mouseup",j)},K=()=>{c.value=1,_.value=0,w.value=0,I.value=0};return Oe(()=>{var a,o;return(o=(a=m.value)==null?void 0:a.standardPhoto)==null?void 0:o.orderPhotoId},()=>{K()}),Te(()=>{}),(a,o)=>{var V,F,H,J,Z,U,q,A,G,Q,ee;const d=u("dict-tag"),ze=u("Warning"),r=u("el-icon"),be=u("el-warning"),Me=u("el-menu-item"),$e=u("el-menu"),De=u("svg-icon"),Le=u("el-image");return k(),D("div",He,[n(m)?(k(),D("div",Je,[e($e,{"default-active":(F=(V=n(m))==null?void 0:V.standardPhoto)==null?void 0:F.orderPhotoId,class:"el-menu-vertical-demo"},{default:s(()=>[(k(!0),D(We,null,Ye(n(h),t=>{var b,M;return k(),te(Me,{index:(b=t==null?void 0:t.standardPhoto)==null?void 0:b.orderPhotoId,key:(M=t==null?void 0:t.standardPhoto)==null?void 0:M.orderPhotoId,onClick:P=>z(t)},{default:s(()=>{var P,$,f,ae;return[e(d,{options:n(de),value:t==null?void 0:t.standardPhotoKey},null,8,["options","value"]),($=(P=t==null?void 0:t.standardPhoto)==null?void 0:P.rejectedItem)!=null&&$.rejectedItem&&((ae=(f=t==null?void 0:t.standardPhoto)==null?void 0:f.rejectedItem)==null?void 0:ae.rejectedItem.length)>0?(k(),te(r,{key:0,size:"small",class:"waring-icon"},{default:s(()=>[e(ze)]),_:1})):ne("",!0),e(be)]}),_:2},1032,["index","onClick"])}),128))]),_:1},8,["default-active"])])):ne("",!0),i("div",Ze,[e(Le,{ref_key:"imageRef",ref:y,src:(J=(H=n(m))==null?void 0:H.standardPhoto)==null?void 0:J.photoOriginal,class:"imageDetail",onClose:ke,"hide-on-click-modal":!0,"preview-src-list":(U=(Z=n(m))==null?void 0:Z.standardPhoto)!=null&&U.photoOriginal?[(A=(q=n(m))==null?void 0:q.standardPhoto)==null?void 0:A.photoOriginal]:[],fit:"cover"},{viewer:s(({image:t})=>[i("div",{class:S(["viewerCallipers",{"grid-container":p.value}])},null,2)]),toolbar:s(({actions:t,prev:b,next:M,reset:P,activeIndex:$})=>[e(r,{onClick:f=>t("zoomOut")},{default:s(()=>[e(n(oe))]),_:2},1032,["onClick"]),e(r,{onClick:f=>t("zoomIn",{enableTransition:!1,zoomRate:2})},{default:s(()=>[e(n(se))]),_:2},1032,["onClick"]),e(r,{onClick:f=>t("clockwise",{rotateDeg:180,enableTransition:!1})},{default:s(()=>[e(n(le))]),_:2},1032,["onClick"]),e(r,{onClick:f=>t("anticlockwise")},{default:s(()=>[e(n(re))]),_:2},1032,["onClick"]),e(r,{onClick:ge},{default:s(()=>[e(De,{"icon-class":"caliper"})]),_:1})]),_:1},8,["src","preview-src-list"]),i("div",Ue,[i("div",{class:S(["imageWrapper",{dragging:g.value}]),ref_key:"imageWrapperRef",ref:ve,onWheel:Be(we,["prevent"])},[i("div",{class:"imageTransformContainer",style:ie(me.value)},[i("img",{ref_key:"mainImageRef",ref:ue,src:((Q=(G=n(m))==null?void 0:G.standardPhoto)==null?void 0:Q.photoOriginal)||n(Ke),class:"mainImage",style:ie(_e.value),onMousedown:ye,onLoad:Ce},null,44,qe)],4)],34),i("div",Ae,[i("div",{class:S(["custom-prev-btn",{disabled:E.value}]),onClick:fe},[e(r,null,{default:s(()=>[e(n(Ee))]),_:1})],2),i("div",{class:S(["custom-next-btn",{disabled:X.value}]),onClick:he},[e(r,null,{default:s(()=>[e(n(Xe))]),_:1})],2)]),i("div",Ge,ce(v.value+1)+"/"+ce(((ee=n(h))==null?void 0:ee.length)||0),1),i("div",Qe,[i("div",ea,[e(r,{onClick:Pe,size:38},{default:s(()=>[e(n(oe))]),_:1}),e(r,{onClick:Ie,size:38},{default:s(()=>[e(n(se))]),_:1}),e(r,{onClick:xe,size:38},{default:s(()=>[e(n(re))]),_:1}),e(r,{onClick:Se,size:38},{default:s(()=>[e(n(le))]),_:1}),e(r,{onClick:pe,size:38},{default:s(()=>[e(n(Ne))]),_:1})])])])])])}}},da=Re(aa,[["__scopeId","data-v-e12019c1"]]);export{da as default};
