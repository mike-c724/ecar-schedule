import{F as $}from"./index-DkNaNI8o.js";import{g as E}from"./index-B_WgeOkJ.js";import{e as n}from"./jsencrypt-cBOclhC6.js";import{a as x,r as _,v as p,o as L,c as N,f as R,i,z as C,E as w,t as M}from"./index-CBERRbij.js";import"./jsencrypt.min-BU9v9zQp.js";const O={class:"app-container damage-order-list"},k=C({name:"DamageOrderList"}),j=Object.assign(k,{setup(S){const c=x(),{proxy:t}=M(),m=_(null),u=p(()=>[{type:"input",label:"订单编号",prop:"orderNo",placeholder:"请输入订单编号"},{type:"input",label:"VIN码",prop:"vin",placeholder:"请输入VIN码"},{type:"daterange",label:"提交时间",prop:"time1",placeholder:"请选择提交时间"},{type:"daterange",label:"审核时间",prop:"time2",placeholder:"请选择审核时间"},{type:"input",label:"审核人",prop:"evaluationUserName",placeholder:"请输入审核人"}]),f=[{prop:"time1",startTime:"submitStartTime",endTime:"submitEndTime"},{prop:"time2",startTime:"evaluationStartTime",endTime:"evaluationEndTime"}],g=p(()=>[{label:"序号",type:"index"},{prop:"orderNo",label:"订单编号"},{prop:"vin",label:"VIN码"},{prop:"planName",label:"检测方案"},{label:"车型",formatter:(a,e)=>{var l,s,d;if(!e.orderBase||!e.orderBase.drivingLicenseInfo)return"";const r=((l=e.orderBase.drivingLicenseInfo)==null?void 0:l.models)||"",o=((s=e.orderBase.drivingLicenseInfo)==null?void 0:s.brand)||"",I=((d=e.orderBase.drivingLicenseInfo)==null?void 0:d.carSeries)||"";return`${o} ${I} ${r}`}},{label:"审核人",formatter:(a,e)=>{var r;return!e.orderBase||!e.orderBase.orderEvaluation?"":(r=e.orderBase.orderEvaluation)==null?void 0:r.evaluationUserName}},{label:"提交人",formatter:(a,e)=>{var r;return!e.orderBase||!e.orderBase.orderEvaluation?"":(r=e.orderBase.orderEvaluation)==null?void 0:r.createBy}},{label:"审核时间",formatter:(a,e)=>{var r;return!e.orderBase||!e.orderBase.orderEvaluation?"":(r=e.orderBase.orderEvaluation)==null?void 0:r.evaluationOrderTime}},{label:"提交时间",formatter:(a,e)=>{var r;return!e.orderBase||!e.orderBase.orderEvaluation?"":(r=e.orderBase.orderEvaluation)==null?void 0:r.createOrderTime}}]),v=[{label:"继续定损",type:"primary",action:"continueDamage"},{label:"查看报告",type:"primary",action:"viewRecord"},{label:"复制报告链接",type:"primary",action:"copyReportLink"}],b=({action:a,row:e})=>{var o;const r={continueDamage:y,viewRecord:B,copyReportLink:T};(o=r[a])==null||o.call(r,e)};async function y(a){try{await w.confirm("是否继续评测此定损订单？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),c.push({path:`/evaluationManagement/toBeEvaluated/${a.orderId}`})}catch{}}function B(a){if(a.templateType==1){const e=n(a.orderId);window.open(`${window.location.origin}/evaluationManagement/record/view/${e}`)}else if(a.templateType==2){const e=n(a.orderId);window.open(`${window.location.origin}/evaluationManagement/chassisReport/view/${e}`)}else t.$message.error("无此类型报告")}function T(a){let e="";if(a.templateType==1){const r=n(a.orderId);e=`${window.location.origin}/evaluationManagement/record/view/${r}`}else if(a.templateType==2){const r=n(a.orderId);e=`${window.location.origin}/evaluationManagement/chassisReport/view/${r}`}else{t.$message.error("无此类型报告");return}h(e).then(()=>{t.$message.success("报告链接已复制到剪贴板")}).catch(r=>{t.$message.error("复制失败，请手动复制链接"),console.error("Could not copy text: ",r)})}function h(a){if(navigator.clipboard&&window.isSecureContext)return navigator.clipboard.writeText(a);{let e=document.createElement("textarea");return e.value=a,e.style.position="absolute",e.style.opacity=0,e.style.left="-999999px",e.style.top="-999999px",document.body.appendChild(e),e.focus(),e.select(),new Promise((r,o)=>{document.execCommand("copy")?r():o(),e.remove()})}}return(a,e)=>(L(),N("div",O,[R($,{ref_key:"formTableRef",ref:m,"form-config":i(u),"table-columns":i(g),operations:v,api:i(E),showAdd:!1,"daterange-map-list":f,onOperation:b},null,8,["form-config","table-columns","api"])]))}});export{j as default};
