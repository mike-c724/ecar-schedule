import{_ as j,r as A,a0 as C,g as h,o as v,l as k,w as c,e as _,f as g,h as E,c as V,F as w,C as B,i as O,x as D,n as U,a$ as F,b0 as z}from"./index-Bz8aCySx.js";import{C as G,n as r,v as H,i as x,D as M}from"./useOrderInfo-oTm2EOs0.js";const $={class:"dialog-body"},q={class:"dialog-footer"},J={__name:"editChassisEvaluationItems",props:{modelValue:{type:Boolean,default:!1},chassisItem:{type:Object,default:()=>{}}},emits:["update:modelValue","confirm"],setup(T,{emit:L}){const n=T,b=L,u=A(n.modelValue),l=A({});C(()=>n.chassisItem,()=>{N()},{deep:!0});const N=()=>{var e;l.value={},(e=n.chassisItem.assessmentSelectInfoList)==null||e.forEach(a=>{l.value[a.productAssessmentId]=a.assessmentEvaluationCriteriaId})};C(()=>n.modelValue,e=>{u.value=e}),C(()=>u.value,e=>{b("update:modelValue",e)});const P=()=>{u.value=!1},R=(e,a,i)=>{l.value[a]===i?l.value[a]=void 0:l.value[a]=i},S=()=>{var m,I,t,o,f,y;const e=Object.entries(l.value).filter(([p,d])=>d!==void 0).map(([p,d])=>d),a=Object.entries(l.value).filter(([p,d])=>d!==void 0).map(([p,d])=>({assessmentEvaluationCriteriaId:d,productAssessmentId:p}));let i=F,s={};n.chassisItem.type==="ecoChassis"?(console.log("ecoChassis111",n.chassisItem,r.value),s.chassisPoint=H.value,s.assessmentEvaluationCriteriaId=e,s.planColumn=null,s.detectionType=(m=r)==null?void 0:m.value.detectionType,s.orderId=x.value,s.planRow=null,s.partsId=(I=r.value)==null?void 0:I.partsId,s.orderBearingDetectionEvaluationId=(t=r.value)==null?void 0:t.orderBearingDetectionEvaluationId,i=z):s={assessmentEvaluationCriteriaId:e,orderId:x.value,detectionType:(o=r)==null?void 0:o.value.detectionType,orderPhoto:n.chassisItem,planColumn:(f=r)==null?void 0:f.value.column,planRow:(y=r)==null?void 0:y.value.row,orderChassisInspectionEvaluationId:n.chassisItem.orderEvaluationId},i(s).then(p=>{M(a),b("confirm",a)}),u.value=!1};return(e,a)=>{const i=h("el-radio"),s=h("el-radio-group"),m=h("el-button"),I=h("el-dialog");return v(),k(I,{modelValue:u.value,"onUpdate:modelValue":a[0]||(a[0]=t=>u.value=t),title:"编辑评测项",width:"50%"},{footer:c(()=>[_("span",q,[g(m,{onClick:P},{default:c(()=>[E("取消")]),_:1}),g(m,{type:"primary",onClick:S},{default:c(()=>[E("确定")]),_:1})])]),default:c(()=>[_("div",$,[(v(!0),V(w,null,B(O(G),t=>(v(),V("div",{key:t.productAssessmentId},[_("h3",null,D(t.assessmentName),1),g(s,{class:"margin-b0",modelValue:l.value[t.productAssessmentId],"onUpdate:modelValue":o=>l.value[t.productAssessmentId]=o,onChange:o=>e.handleRadioChange(o,t.productAssessmentId)},{default:c(()=>[(v(!0),V(w,null,B(t.evaluationCriteriaList,o=>(v(),k(i,{class:"margin-b0",key:o.assessmentEvaluationCriteriaId,value:o.assessmentEvaluationCriteriaId,label:o.assessmentEvaluationCriteriaId,onClick:U(f=>R(f,t.productAssessmentId,o.assessmentEvaluationCriteriaId),["prevent"])},{default:c(()=>[E(D(o.damageDescription),1)]),_:2},1032,["value","label","onClick"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])]))),128))])]),_:1},8,["modelValue"])}}},W=j(J,[["__scopeId","data-v-d6fe024b"]]);export{W as default};
