import{r as s,b as R,g as n,R as V,o as y,c as z,f as e,w as a,k as B,h as c,S as b,l as P,e as T,x as U,T as L,z as E}from"./index-Bz8aCySx.js";import{g as K}from"./report-DSOpwywR.js";import Q from"./reportDialog-C19R8pp8.js";const j={class:"app-container report"},q=E({name:"Report"}),G=Object.assign(q,{setup(A){const t=s({pageNum:1,pageSize:10,templateName:""}),g=s([]),m=s(0),d=s(!1),_=s(null),i=async()=>{d.value=!0;try{const o=await K(t.value);g.value=o.rows||[],m.value=o.total||0}catch(o){console.error("获取报告模板列表失败",o)}finally{d.value=!1}},f=()=>{t.value.pageNum=1,i()},N=()=>{t.value={pageNum:1,pageSize:10,templateName:""},i()},w=()=>{_.value.openDialog()},h=o=>{_.value.openDialog(o)};return R(()=>{i()}),(o,r)=>{const k=n("el-input"),v=n("el-form-item"),p=n("el-button"),S=n("el-form"),u=n("el-table-column"),C=n("el-table"),D=n("pagination"),x=V("loading");return y(),z("div",j,[e(S,{model:t.value,inline:!0},{default:a(()=>[e(v,{label:"模板名称"},{default:a(()=>[e(k,{modelValue:t.value.templateName,"onUpdate:modelValue":r[0]||(r[0]=l=>t.value.templateName=l),placeholder:"请输入模板名称",clearable:"",style:{width:"240px"},onKeyup:B(f,["enter"])},null,8,["modelValue"])]),_:1}),e(v,null,{default:a(()=>[e(p,{type:"primary",icon:"Search",onClick:f},{default:a(()=>[c("查询")]),_:1}),e(p,{icon:"Refresh",onClick:N},{default:a(()=>[c("重置")]),_:1}),e(p,{type:"primary",icon:"Plus",onClick:w},{default:a(()=>[c("新建模板")]),_:1})]),_:1})]),_:1},8,["model"]),b((y(),P(C,{data:g.value},{default:a(()=>[e(u,{type:"index",label:"序号",width:"50",align:"center"}),e(u,{prop:"templateName",label:"模板名称",align:"center"}),e(u,{prop:"createTime",label:"创建时间",align:"center"},{default:a(l=>[T("span",null,U(l.row.createTime),1)]),_:1}),e(u,{label:"操作",align:"center",width:"180"},{default:a(l=>[e(p,{type:"primary",link:"",icon:"Edit",onClick:M=>h(l.row)},{default:a(()=>[c("修改")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[x,d.value]]),b(e(D,{total:m.value,page:t.value.pageNum,"onUpdate:page":r[1]||(r[1]=l=>t.value.pageNum=l),limit:t.value.pageSize,"onUpdate:limit":r[2]||(r[2]=l=>t.value.pageSize=l),onPagination:i},null,8,["total","page","limit"]),[[L,m.value>0]]),e(Q,{ref_key:"reportDialogRef",ref:_,onSuccess:i},null,512)])}}});export{G as default};
