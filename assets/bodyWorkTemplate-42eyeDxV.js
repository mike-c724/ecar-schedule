import{e as C}from"./empty-X662_Asi.js";import{a as re,S as le}from"./swiper-vue-Cu1ZKMQW.js";import{c as A,d as ie,e as u,g as E,h as ce,i as z,r as ue,j as de,k as _e,l as pe,m as me}from"./useOrderInfo-oTm2EOs0.js";import"./swiper-LA7WfxAj.js";import{Z as fe}from"./zoom-Ca8q2gD7.js";/* empty css             *//* empty css                   *//* empty css                   */import{_ as ve,r as x,b as he,g as d,o as n,c as m,i as t,f as e,w as a,F as P,C as b,l as f,e as _,x as B,m as S,H as ke,at as ge,as as Ie,av as ye,au as we,aJ as Ce,aK as xe,aw as Pe,t as be}from"./index-Bz8aCySx.js";const Be={class:"baseInfo-container chassisInfo"},Se={key:0,class:"leftPart"},je={class:"contentMain"},Le={class:"swiperBox"},We={class:"numberBox"},ze={class:"swiper-zoom-container"},Ge=["src"],Re={class:"swiper-pagination-custom",slot:"pagination"},Te={class:"iconBox"},$e={__name:"bodyWorkTemplate",setup(Ne){const j=x(null),H=[fe],{proxy:L}=be(),{detection_type:J}=L.useDict("detection_type"),K=x({photoOriginal:C}),k=x(!1),p=x(null),q=r=>{p.value=r},Q=()=>{p.value&&p.value.slidePrev()},U=r=>{console.log("slide change to index:",r.activeIndex),ce(r.activeIndex)},X=()=>{p.value&&p.value.slideNext()},Y=()=>{j.value&&j.value.showPreview()},ee=async r=>{var I,y;L.$modal.loading("加载中...");let g={detectionType:u.value.detectionType,partsId:u.value.partsId,orderId:z.value,rejectedItem:ue.value,rejectedRemark:de.value,orderDetectionRejectedItemId:((y=(I=u.value)==null?void 0:I.rejectedItem)==null?void 0:y.orderDetectionRejectedItemId)||null};await _e(g),await pe(z.value,"partOperate");let i={detectionType:r.detectionType,orderId:z.value,partsId:r.partsId};await me(i)&&p.value&&p.value.slideTo(0,0),L.$modal.closeLoading()},te=()=>{k.value=!k.value},oe=()=>{k.value&&(k.value=!1)},G=(r,g=null)=>r==null?void 0:r.some(i=>g!==null?i.partsId===g&&i.assessmentGroupList.some(s=>s.isReject===!0):i.assessmentGroupList.some(s=>s.isReject===!0));return he(()=>{}),(r,g)=>{var $,N,O,D,M,V,F;const i=d("Warning"),s=d("el-icon"),I=d("dict-tag"),y=d("el-menu-item"),R=d("el-menu-item-group"),T=d("el-sub-menu"),ae=d("el-menu"),se=d("svg-icon"),ne=d("el-image");return n(),m("div",Be,[($=t(A))!=null&&$.length?(n(),m("div",Se,[e(ae,{"default-active":t(ie),class:"el-menu-vertical-demo"},{default:a(()=>[(n(!0),m(P,null,b(t(A),o=>(n(),f(T,{class:"subMenu-chassisInfo",index:o==null?void 0:o.protocolsPartsGroupId,key:o==null?void 0:o.protocolsPartsGroupId},{title:a(()=>[_("span",null,B(o==null?void 0:o.groupName),1),G(o.partsList)?(n(),f(s,{key:0,size:"small",class:"waring-icon"},{default:a(()=>[e(i)]),_:1})):S("",!0)]),default:a(()=>[e(R,null,{default:a(()=>[(n(!0),m(P,null,b(o==null?void 0:o.partsList,l=>(n(),f(T,{index:`${l.partsId}`},{title:a(()=>[_("span",null,B(l.partsName),1),G(o.partsList,l.partsId)?(n(),f(s,{key:0,size:"small",class:"waring-icon"},{default:a(()=>[e(i)]),_:1})):S("",!0)]),default:a(()=>[e(R,null,{default:a(()=>[(n(!0),m(P,null,b(l==null?void 0:l.assessmentGroupList,c=>(n(),f(y,{index:`${c.partsId}-${c.detectionType}`,onClick:w=>ee(c)},{default:a(()=>[e(I,{options:t(J),value:c.detectionType},null,8,["options","value"]),c.isReject?(n(),f(s,{key:0,size:"small",class:"waring-icon"},{default:a(()=>[e(i)]),_:1})):S("",!0)]),_:2},1032,["index","onClick"]))),256))]),_:2},1024)]),_:2},1032,["index"]))),256))]),_:2},1024)]),_:2},1032,["index"]))),128))]),_:1},8,["default-active"])])):S("",!0),_("div",je,[e(ne,{ref_key:"imageRef",ref:j,src:((D=(O=(N=t(u))==null?void 0:N.assessmentPhotoList)==null?void 0:O[t(E)])==null?void 0:D.photoOriginal)||t(C),class:"imageDetail",onClose:oe,"hide-on-click-modal":!0,"preview-src-list":[((F=(V=(M=t(u))==null?void 0:M.assessmentPhotoList)==null?void 0:V[t(E)])==null?void 0:F.photoOriginal)||t(C)],fit:"cover"},{viewer:a(({image:o})=>[_("div",{class:ke(["viewerCallipers",{"grid-container":k.value}])},null,2)]),toolbar:a(({actions:o,prev:l,next:c,reset:w,activeIndex:W})=>[e(s,{onClick:v=>o("zoomOut")},{default:a(()=>[e(t(ge))]),_:2},1032,["onClick"]),e(s,{onClick:v=>o("zoomIn",{enableTransition:!1,zoomRate:2})},{default:a(()=>[e(t(Ie))]),_:2},1032,["onClick"]),e(s,{onClick:v=>o("clockwise",{rotateDeg:180,enableTransition:!1})},{default:a(()=>[e(t(ye))]),_:2},1032,["onClick"]),e(s,{onClick:v=>o("anticlockwise")},{default:a(()=>[e(t(we))]),_:2},1032,["onClick"]),e(s,{onClick:te},{default:a(()=>[e(se,{"icon-class":"caliper"})]),_:1})]),_:1},8,["src","preview-src-list"]),_("div",Le,[e(t(le),{onSwiper:q,zoom:!1,modules:H,onSlideChange:U,class:"mySwiper"},{default:a(()=>{var o,l,c,w,W,v;return[_("div",We,B(((o=p.value)==null?void 0:o.activeIndex)+1)+"/"+B(((c=(l=t(u))==null?void 0:l.assessmentPhotoList)==null?void 0:c.length)||1),1),(n(!0),m(P,null,b((w=t(u))!=null&&w.assessmentPhotoList&&((W=t(u))==null?void 0:W.assessmentPhotoList.length)>0?(v=t(u))==null?void 0:v.assessmentPhotoList:[K.value],(h,Z)=>(n(),f(t(re),{key:Z},{default:a(()=>[_("div",ze,[(n(),m("img",{src:(h==null?void 0:h.photoOriginal)||t(C),key:(h==null?void 0:h.photoOriginal)||Z},null,8,Ge))])]),_:2},1024))),128)),_("div",Re,[_("div",Te,[e(s,{onClick:Q},{default:a(()=>[e(t(Ce))]),_:1}),e(s,{onClick:X},{default:a(()=>[e(t(xe))]),_:1}),e(s,{onClick:Y},{default:a(()=>[e(t(Pe))]),_:1})])])]}),_:1})])])])}}},Je=ve($e,[["__scopeId","data-v-6da3124c"]]);export{Je as default};
