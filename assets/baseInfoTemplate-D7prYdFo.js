import{_ as be,r as l,v as k,a0 as Be,b as ye,g as p,o as I,c as G,e as r,f as a,w as o,F as Se,C as ze,i as n,l as M,al as Me,m as Re,H as D,at as Q,as as ee,av as ae,au as te,n as Oe,a2 as ne,aJ as Le,aK as Te,x as oe,aw as $e,t as je,p as Ye,q as Ee}from"./index-Bz8aCySx.js";import{e as Ne}from"./empty-X662_Asi.js";import{s as v,a as m,b as Xe}from"./useOrderInfo-oTm2EOs0.js";const We=C=>(Ye("data-v-489d1da9"),C=C(),Ee(),C),Ve={class:"baseInfo-container"},Fe={class:"leftPart"},He=We(()=>r("span",null,"暂无数据",-1)),Ze={class:"contentMain"},qe={class:"imageContainer"},Je=["src"],Ke={class:"image-custom-navigation"},Ue={class:"numberBox"},Ae={class:"image-pagination-custom"},Ge={class:"iconBox"},R=.5,O=3,L=.2,Qe={__name:"baseInfoTemplate",setup(C){const b=l(null),se=l(null),le=l(null),{proxy:T}=je();T.useDict("base_info_id");const re=e=>e.photoDict?T.useDict(e.photoDict)[e.photoDict].value:[{label:"其他信息",value:"other",elTagType:"default"}],_=k(()=>{var e,s;return((s=(e=v.value)==null?void 0:e.orderBasePhoto)==null?void 0:s.length)>0}),h=l(!1),d=l(0),u=l(1),f=l(0),w=l(0),x=l(0),$=l(0),j=l(0),Y=l(0),E=l(0),g=l(!1),ie=k(()=>({transform:`translate(${w.value}px, ${x.value}px)`})),ue=k(()=>({transform:`scale(${u.value}) rotate(${f.value}deg)`,transition:g.value?"none":"transform 0.2s ease"})),N=k(()=>!_.value||d.value<=0),X=k(()=>{var e,s;return!_.value||d.value>=(((s=(e=v.value)==null?void 0:e.orderBasePhoto)==null?void 0:s.length)-1||0)}),ce=(e,s)=>{d.value=s,B(e)},de=()=>{if(!_.value||N.value)return;const e=d.value-1;d.value=e,B(v.value.orderBasePhoto[e])},ve=()=>{if(!_.value||X.value)return;const e=d.value+1;d.value=e,B(v.value.orderBasePhoto[e])},me=()=>{b.value&&b.value.showPreview()},B=e=>{Xe(e)},_e=()=>{h.value=!h.value},fe=()=>{h.value&&(h.value=!1)},pe=()=>{F()},he=e=>{e.preventDefault();const s=e.deltaY>0?-.2:L,c=u.value+s;c>=R&&c<=O&&(u.value=c)},ge=()=>{u.value<O&&(u.value=Math.min(u.value+L,O))},ke=()=>{u.value>R&&(u.value=Math.max(u.value-L,R))},Ie=()=>{f.value=(f.value-90)%360},Ce=()=>{f.value=(f.value+90)%360},we=e=>{g.value=!0,$.value=e.clientX,j.value=e.clientY,Y.value=w.value,E.value=x.value,document.addEventListener("mousemove",W),document.addEventListener("mouseup",V),e.preventDefault()},W=e=>{if(!g.value)return;const s=e.clientX-$.value,c=e.clientY-j.value;w.value=Y.value+s,x.value=E.value+c},V=()=>{g.value=!1,document.removeEventListener("mousemove",W),document.removeEventListener("mouseup",V)},F=()=>{u.value=1,f.value=0,w.value=0,x.value=0};return Be(()=>{var e;return(e=m.value)==null?void 0:e.orderPhotoId},()=>{F()}),ye(()=>{if(_.value&&v.value.orderBasePhoto.length>0){const e=v.value.orderBasePhoto.findIndex(s=>{var c;return s.orderPhotoId===((c=m.value)==null?void 0:c.orderPhotoId)});e!==-1&&(d.value=e)}}),(e,s)=>{var Z,q,J,K,U;const c=p("dict-tag"),i=p("el-icon"),H=p("el-menu-item"),xe=p("el-menu"),Pe=p("svg-icon"),De=p("el-image");return I(),G("div",Ve,[r("div",Fe,[a(xe,{"default-active":(Z=n(m))==null?void 0:Z.orderPhotoId,class:"el-menu-vertical-demo"},{default:o(()=>[_.value?(I(!0),G(Se,{key:0},ze(n(v).orderBasePhoto,(t,A)=>(I(),M(H,{index:t.orderPhotoId,key:t.orderPhotoId,onClick:P=>ce(t,A)},{default:o(()=>{var P,y,S;return[a(c,{options:re(t),value:t.photoName},null,8,["options","value"]),(P=t==null?void 0:t.rejectedItem)!=null&&P.rejectedItem&&((y=t==null?void 0:t.rejectedItem)==null?void 0:y.rejectedItem.length)>0||t!=null&&t.rejectedItem&&((S=t==null?void 0:t.rejectedItem)==null?void 0:S.rejectedRemark)!=""?(I(),M(i,{key:0,size:"small",class:"waring-icon"},{default:o(()=>[a(n(Me))]),_:1})):Re("",!0)]}),_:2},1032,["index","onClick"]))),128)):(I(),M(H,{key:1,index:"noData",class:"noData"},{default:o(()=>[He]),_:1}))]),_:1},8,["default-active"])]),r("div",Ze,[a(De,{ref_key:"imageRef",ref:b,src:(q=n(m))==null?void 0:q.photoOriginal,class:"imageDetail",onClose:fe,"hide-on-click-modal":!0,"preview-src-list":(J=n(m))!=null&&J.photoOriginal?[n(m).photoOriginal]:[],fit:"cover"},{viewer:o(({image:t})=>[r("div",{class:D(["viewerCallipers",{"grid-container":h.value}])},null,2)]),toolbar:o(({actions:t,prev:A,next:P,reset:y,activeIndex:S})=>[a(i,{onClick:z=>t("zoomOut")},{default:o(()=>[a(n(Q))]),_:2},1032,["onClick"]),a(i,{onClick:z=>t("zoomIn",{enableTransition:!1,zoomRate:2})},{default:o(()=>[a(n(ee))]),_:2},1032,["onClick"]),a(i,{onClick:z=>t("clockwise",{rotateDeg:180,enableTransition:!1})},{default:o(()=>[a(n(ae))]),_:2},1032,["onClick"]),a(i,{onClick:z=>t("anticlockwise")},{default:o(()=>[a(n(te))]),_:2},1032,["onClick"]),a(i,{onClick:_e},{default:o(()=>[a(Pe,{"icon-class":"caliper"})]),_:1})]),_:1},8,["src","preview-src-list"]),r("div",qe,[r("div",{class:D(["imageWrapper",{dragging:g.value}]),ref_key:"imageWrapperRef",ref:le,onWheel:Oe(he,["prevent"])},[r("div",{class:"imageTransformContainer",style:ne(ie.value)},[r("img",{ref_key:"mainImageRef",ref:se,src:((K=n(m))==null?void 0:K.photoOriginal)||n(Ne),class:"mainImage",style:ne(ue.value),onMousedown:we,onLoad:pe},null,44,Je)],4)],34),r("div",Ke,[r("div",{class:D(["custom-prev-btn",{disabled:N.value}]),onClick:de},[a(i,null,{default:o(()=>[a(n(Le))]),_:1})],2),r("div",{class:D(["custom-next-btn",{disabled:X.value}]),onClick:ve},[a(i,null,{default:o(()=>[a(n(Te))]),_:1})],2)]),r("div",Ue,oe(d.value+1)+"/"+oe(((U=n(v).orderBasePhoto)==null?void 0:U.length)||0),1),r("div",Ae,[r("div",Ge,[a(i,{onClick:ke,size:38},{default:o(()=>[a(n(Q))]),_:1}),a(i,{onClick:ge,size:38},{default:o(()=>[a(n(ee))]),_:1}),a(i,{onClick:Ie,size:38},{default:o(()=>[a(n(te))]),_:1}),a(i,{onClick:Ce,size:38},{default:o(()=>[a(n(ae))]),_:1}),a(i,{onClick:me,size:38},{default:o(()=>[a(n($e))]),_:1})])])])])])}}},na=be(Qe,[["__scopeId","data-v-489d1da9"]]);export{na as default};
