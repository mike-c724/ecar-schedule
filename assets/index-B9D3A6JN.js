import{r,a as T,v as c,b as P,K as C,o as N,c as S,f as L,i as p,aC as x,z as E,t as M,E as O}from"./index-CBERRbij.js";import{F as k}from"./index-DkNaNI8o.js";import{b as V,c as $}from"./index-C2-I7XPk.js";const w={class:"app-container"},R=E({name:"PendingEvaluationList"}),z=Object.assign(R,{setup(j){const{proxy:d}=M(),{order_type:A,order_status:u}=d.useDict("order_type","order_status"),a=r(null),m=T(),n=r([]),f=r({queryStatus:4}),b=c(()=>[{label:"订单编号",placeholder:"请输入订单编号",type:"input",prop:"orderNo"},{label:"检测方案",placeholder:"请选择检测方案",type:"select",prop:"detectionProtocolsId",options:n.value||[]},{label:"VIN码",placeholder:"请输入VIN码",type:"input",prop:"vin"},{label:"提交时间",placeholder:"请选择提交时间",type:"daterange",prop:"time"}]),v=[{prop:"time",startTime:"submitStartTime",endTime:"submitEndTime"}],g=c(()=>[{label:"序号",type:"index",width:50},{label:"订单编号",prop:"orderNo"},{label:"VIN码",prop:"vin"},{prop:"planName",label:"检测方案"},{label:"车型",formatter:(t,e)=>{var s,l,i;const o=((s=e.orderBase.drivingLicenseInfo)==null?void 0:s.models)||"",B=((l=e.orderBase.drivingLicenseInfo)==null?void 0:l.brand)||"",I=((i=e.orderBase.drivingLicenseInfo)==null?void 0:i.carSeries)||"";return`${B} ${I} ${o}`}},{label:"审核人",prop:"rushUserName"},{label:"提交人",prop:"createBy"},{label:"订单状态",prop:"orderStatus",type:"dict",options:u.value},{label:"提交时间",prop:"submitTime"}]),y=[{label:"评测",type:"primary",action:"review",formatter:t=>t.orderStatus==11?"继续评测":"评测"}],_=async({action:t,row:e})=>{if(t!=="review")return;const o=e.orderStatus==11?"确认要继续评测此挂起订单吗？":"确认要评测此订单吗？";try{await O.confirm(o,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),e.orderStatus==11&&(console.log(123),await V(e.orderId)),m.push({path:`/evaluationManagement/toBeEvaluated/${e.orderId}`})}catch{}},h=async()=>{const{code:t,data:e}=await $();t===200&&(n.value=e.map(o=>({value:o.detectionProtocolsId,label:o.planName})))};return P(()=>{h()}),C(()=>{a.value&&a.value.getList()}),(t,e)=>(N(),S("div",w,[L(p(k),{ref_key:"formTableRef",ref:a,formConfig:b.value,showAdd:!1,tableColumns:g.value,operations:y,otherParams:f.value,"daterange-map-list":v,api:p(x),onOperation:_},null,8,["formConfig","tableColumns","otherParams","api"])]))}});export{z as default};
