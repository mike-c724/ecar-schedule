import{_ as O,r,g as s,o as v,l as R,w as l,e as n,f as o,c as $,F as q,C as F,h as m,ay as U,p as L,q as T,t as j}from"./index-CBERRbij.js";const z=u=>(L("data-v-25c468cd"),u=u(),T(),u),A={class:"status-change-dialog"},G=z(()=>n("div",{class:"notice-box"},[n("div",{class:"notice-title"},[n("i",{class:"el-icon-warning"}),m(" 注意！ ")]),n("div",{class:"notice-content"},"如果订单报告已交付客户，建议不要轻易修改，请谨慎操作")],-1)),H={class:"dialog-footer"},J={__name:"statusChangeDialog",emits:["refresh"],setup(u,{expose:g,emit:h}){const{proxy:i}=j(),b=h,_=r(null),a=r({status:""}),C={status:[{required:!0,message:"请选择状态",trigger:"change"}]},c=r(!1),p=r(""),y=r(null),V=[{label:"草稿",value:"1"},{label:"已抢单/评估中",value:"4"}],x=e=>{c.value=!0,p.value=e.orderId,y.value=e,a.value.status=""},k=()=>{c.value=!1},w=async()=>{_.value.validate(async e=>{e&&await I()})},I=async()=>{try{const e=await U(p.value,a.value.status);e&&e.code===200?(i.$modal.msgSuccess("状态修改成功"),c.value=!1,b("refresh")):i.$modal.msgError(e.msg||"状态修改失败")}catch(e){console.error("状态修改失败",e),i.$modal.msgError("状态修改失败")}};return g({openDialog:x}),(e,d)=>{const S=s("el-option"),B=s("el-select"),D=s("el-form-item"),E=s("el-form"),f=s("el-button"),N=s("el-dialog");return v(),R(N,{modelValue:c.value,"onUpdate:modelValue":d[1]||(d[1]=t=>c.value=t),title:"状态修改",width:"30%"},{default:l(()=>[n("div",A,[o(E,{model:a.value,ref_key:"formRef",ref:_,rules:C},{default:l(()=>[o(D,{label:"状态",prop:"status"},{default:l(()=>[o(B,{modelValue:a.value.status,"onUpdate:modelValue":d[0]||(d[0]=t=>a.value.status=t),placeholder:"请选择"},{default:l(()=>[(v(),$(q,null,F(V,t=>o(S,{key:t.value,label:t.label,value:t.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"]),G,n("div",H,[o(f,{onClick:k},{default:l(()=>[m("取消")]),_:1}),o(f,{type:"primary",onClick:w,disabled:!a.value.status},{default:l(()=>[m("确认修改")]),_:1},8,["disabled"])])])]),_:1},8,["modelValue"])}}},M=O(J,[["__scopeId","data-v-25c468cd"]]);export{M as default};
