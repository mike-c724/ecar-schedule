import{_ as Q,r as b,b as $,o as r,c as u,f as e,w as t,z as G,u as K,Q as U,g as y,e as a,F as k,C as D,l as z,H as C,x as i,i as h,m as A,h as m,p as W,q as X}from"./index-CBERRbij.js";const w=x=>(W("data-v-5ebab88d"),x=x(),X(),x),Y={class:"app-container accident-occurred"},Z=w(()=>a("div",{class:"card-header"},"车辆重点检查",-1)),ee=w(()=>a("div",{class:"card-header-desc"},"请结合实际车况，重点检查以下参考信息。",-1)),te={class:"check-status"},ae={class:"check-items"},se={class:"item-name"},le=w(()=>a("div",{class:"card-header"},"重要信息提示",-1)),oe=w(()=>a("div",{class:"card-header-desc"},"请结合实际车况，重点检查以下参考信息。",-1)),ne={class:"info-status"},ie={class:"info-items"},re={class:"item-name"},ce=w(()=>a("div",{class:"card-header"},"历史记录概况",-1)),de={class:"history-content"},pe={class:"history-item"},ue={class:"history-label"},he=w(()=>a("div",{class:"card-header"},"维修部位详情",-1)),_e={class:"repair-parts-content"},me={class:"position-info"},fe={class:"position-name"},ge={key:0,class:"record-count"},ve={class:"card-header"},ye={class:"accident-content"},be={class:"accident-header"},we={class:"accident-amount"},ke={key:0,class:"damage-details"},De={class:"card-header"},ze={class:"third-party-content"},Ce={class:"accident-header"},Ae={class:"accident-amount"},Ie={key:0,class:"damage-details"},Oe={class:"card-header"},xe=w(()=>a("div",{class:"card-sub-header"},"* 未结案事故将对市值预估产生影响，请特别关注后期",-1)),Ne={class:"unresolved-content"},je={class:"accident-header"},Je={class:"accident-amount"},Se=G({name:"AccidentOccurred"}),Pe=Object.assign(Se,{setup(x){const R=K(),T=b([]),B=b([]),M=b([]),N=b([]),j=b([]),J=b([]),I=b([]),V=async()=>{try{const l=R.params.id,{data:n}=await U(l);if(console.log("柠檬查出险报告数据:",n),!n||n.status!=1)return;const o=n.data||{};E(o.importantJson),F(o.importantInfoJson),H(o.historyJson),L(o.reinforcerJson),N.value=S(o.closeCaseAccidentJson),j.value=S(o.thirdPartyCaseAccidentJson),J.value=S(o.notCaseAccidentJson)}catch(l){console.error("获取柠檬查出险报告失败:",l)}},E=l=>{T.value=Object.keys(l).map(n=>({name:n,status:l[n]!=="否"}))},F=l=>{B.value=Object.keys(l).map(n=>({name:n,status:l[n]}))},H=l=>{M.value=Object.keys(l).map(n=>({label:n,value:l[n],highlight:n.includes("涉三者")}))},L=l=>{I.value=l.reduce((n,o)=>{const d=o.part||"未知部位";return o.lossDetail.forEach(p=>{n.push({position:d,recordCount:`${o.lossDetail.length}条记录`,repairDetail:p.partDetails||"未知维修明细",repairMethod:p.type||"未知维修方式"})}),n},[])},S=l=>{const n={lossSite:"损失部位",accidentType:"类型",thirdParty:"涉三者事故",caseStatus:"案件状态",responsibility:"事故责任划分"};return!l||Object.keys(l).length===0?[]:Object.keys(l).map(o=>{const{lossAmountAccurate:d,fittingDtoList:p,accidentTime:_,...c}=l[o][0]||{};return{year:o,amount:d||"暂无数据",details:c?Object.entries(c).map(([g,f])=>({label:n[g]||"未知字段",value:f||"暂无数据",highlight:f==="是"})):[],damageDetails:p||[]}})},q=({row:l,column:n,rowIndex:o,columnIndex:d})=>{if(d===0){if(o>0&&I.value[o-1].position===l.position)return{rowspan:0,colspan:0};let p=1;for(let _=o+1;_<I.value.length&&I.value[_].position===l.position;_++)p++;return{rowspan:p,colspan:1}}return{rowspan:1,colspan:1}};return $(()=>{V()}),(l,n)=>{const o=y("el-alert"),d=y("el-col"),p=y("el-row"),_=y("el-card"),c=y("el-table-column"),g=y("el-table"),f=y("el-tag"),P=y("el-empty");return r(),u("div",Y,[e(_,{class:"check-card"},{header:t(()=>[Z,ee]),default:t(()=>[a("div",te,[e(p,{gutter:20},{default:t(()=>[e(d,{span:12},{default:t(()=>[e(o,{title:"未出现异常记录",type:"success",closable:!1,"show-icon":""})]),_:1}),e(d,{span:12},{default:t(()=>[e(o,{title:"出现过异常记录",type:"warning",closable:!1,"show-icon":""})]),_:1})]),_:1}),a("div",ae,[e(p,{gutter:20},{default:t(()=>[(r(!0),u(k,null,D(h(T),s=>(r(),z(d,{span:6,key:s.name},{default:t(()=>[a("div",{class:C(["check-item",{abnormal:s.status}])},[a("span",se,i(s.name),1)],2)]),_:2},1024))),128))]),_:1})])])]),_:1}),e(_,{class:"important-info-card"},{header:t(()=>[le,oe]),default:t(()=>[a("div",ne,[e(p,{gutter:20},{default:t(()=>[e(d,{span:12},{default:t(()=>[e(o,{title:"未出现异常记录",type:"success",closable:!1,"show-icon":""})]),_:1}),e(d,{span:12},{default:t(()=>[e(o,{title:"出现过异常记录",type:"warning",closable:!1,"show-icon":""})]),_:1})]),_:1}),a("div",ie,[e(p,{gutter:20},{default:t(()=>[(r(!0),u(k,null,D(h(B),s=>(r(),z(d,{span:6,key:s.name},{default:t(()=>[a("div",{class:C(["info-item",{abnormal:s.status}])},[a("span",re,i(s.name),1)],2)]),_:2},1024))),128))]),_:1})])])]),_:1}),e(_,{class:"history-card"},{header:t(()=>[ce]),default:t(()=>[a("div",de,[e(p,{gutter:20},{default:t(()=>[(r(!0),u(k,null,D(h(M),s=>(r(),z(d,{span:8,key:s.label},{default:t(()=>[a("div",pe,[a("div",ue,i(s.label),1),a("div",{class:C(["history-value",{highlight:s.highlight}])},i(s.value),3)])]),_:2},1024))),128))]),_:1})])]),_:1}),e(_,{class:"repair-parts-card"},{header:t(()=>[he]),default:t(()=>[a("div",_e,[e(g,{data:h(I),border:"",class:"repair-table","span-method":q},{default:t(()=>[e(c,{prop:"position",label:"部位",width:"150",align:"center"},{default:t(({row:s})=>[a("div",me,[a("div",fe,i(s.position),1),s.recordCount?(r(),u("div",ge,"("+i(s.recordCount)+")",1)):A("",!0)])]),_:1}),e(c,{prop:"repairDetail",label:"维修明细",align:"center"}),e(c,{prop:"repairMethod",label:"维修方式",width:"120",align:"center"})]),_:1},8,["data"])])]),_:1}),e(_,{class:"accident-card"},{header:t(()=>[a("div",ve,[m(" 本车已结案事故 "),e(f,{type:"info",size:"small",style:{"margin-left":"10px"}},{default:t(()=>[m(" 共"+i(h(N).length)+"条 ",1)]),_:1})])]),default:t(()=>[a("div",ye,[(r(!0),u(k,null,D(h(N),(s,O)=>(r(),u("div",{key:O,class:"accident-item"},[a("div",be,[e(f,{type:"primary",size:"small"},{default:t(()=>[m(i(s.year),1)]),_:2},1024),a("span",we,i(s.amount)+"元",1)]),e(g,{data:s.details,"show-header":!1,border:"",size:"small"},{default:t(()=>[e(c,{prop:"label",width:"120"}),e(c,{prop:"value"},{default:t(({row:v})=>[a("span",{class:C({"highlight-text":v.highlight})},i(v.value),3)]),_:1})]),_:2},1032,["data"]),s.damageDetails&&s.damageDetails.length>0?(r(),u("div",ke,[e(g,{data:s.damageDetails,border:"",size:"small"},{default:t(()=>[e(c,{prop:"fittingType",label:"维修方式",width:"100"}),e(c,{prop:"fittingName",label:"维修项目"},{header:t(()=>[m(" 维修项目（"+i(s.damageDetails.length)+"条记录） ",1)]),_:2},1024),e(c,{prop:"fittingNum",label:"件数",width:"80"})]),_:2},1032,["data"])])):A("",!0)]))),128)),h(N).length===0?(r(),z(P,{key:0,"image-size":100,description:"暂无已结案事故数据"})):A("",!0)])]),_:1}),e(_,{class:"third-party-card"},{header:t(()=>[a("div",De,[m(" 涉三者车（本年）已结案事故 "),e(f,{type:"info",size:"small",style:{"margin-left":"10px"}},{default:t(()=>[m(" 共"+i(h(j).length)+"条 ",1)]),_:1})])]),default:t(()=>[a("div",ze,[(r(!0),u(k,null,D(h(j),(s,O)=>(r(),u("div",{key:O,class:"accident-item"},[a("div",Ce,[e(f,{type:"primary",size:"small"},{default:t(()=>[m(i(s.year),1)]),_:2},1024),a("span",Ae,i(s.amount)+"元",1)]),e(g,{data:s.details,"show-header":!1,border:"",size:"small"},{default:t(()=>[e(c,{prop:"label",width:"120"}),e(c,{prop:"value"},{default:t(({row:v})=>[a("span",{class:C({"highlight-text":v.highlight})},i(v.value),3)]),_:1})]),_:2},1032,["data"]),s.damageDetails&&s.damageDetails.length>0?(r(),u("div",Ie,[e(g,{data:s.damageDetails,border:"",size:"small"},{default:t(()=>[e(c,{prop:"fittingType",label:"维修方式",width:"100"}),e(c,{prop:"fittingName",label:"维修项目"},{header:t(()=>[m(" 维修项目（"+i(s.damageDetails.length)+"条记录） ",1)]),_:2},1024),e(c,{prop:"fittingNum",label:"件数",width:"80"})]),_:2},1032,["data"])])):A("",!0)]))),128)),h(j).length===0?(r(),z(P,{key:0,"image-size":100,description:"暂无已结案事故数据"})):A("",!0)])]),_:1}),e(_,{class:"unresolved-card"},{header:t(()=>[a("div",Oe,[m(" 本车未结案事故（含涉三者车事故） "),e(f,{type:"info",size:"small",style:{"margin-left":"10px"}},{default:t(()=>[m("共"+i(h(J).length)+"条",1)]),_:1})]),xe]),default:t(()=>[a("div",Ne,[(r(!0),u(k,null,D(h(J),(s,O)=>(r(),u("div",{key:O,class:"accident-item"},[a("div",je,[e(f,{type:"primary",size:"small"},{default:t(()=>[m(i(s.year),1)]),_:2},1024),a("span",Je,i(s.amount)+"元",1)]),e(g,{data:s.details,"show-header":!1,border:"",size:"small"},{default:t(()=>[e(c,{prop:"label",width:"120"}),e(c,{prop:"value"},{default:t(({row:v})=>[a("span",{class:C({"highlight-text":v.highlight})},i(v.value),3)]),_:1})]),_:2},1032,["data"])]))),128)),h(J).length===0?(r(),z(P,{key:0,"image-size":100,description:"暂无未结案事故数据"})):A("",!0)])]),_:1})])}}}),Be=Q(Pe,[["__scopeId","data-v-5ebab88d"]]);export{Be as default};
