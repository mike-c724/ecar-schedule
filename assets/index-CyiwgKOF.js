import{r as J,g as M,e as b}from"./resurveyConclusionDialog-ZfhHBlHH.js";import{_ as L,r as u,b as V,g as p,R as $,o as g,c as j,f as s,w as o,h as c,S as P,l as _,x as k,m as y,z as U,am as l,E as w}from"./index-Bz8aCySx.js";const q={class:"app-container"},A=U({name:"ResurveyConclusion"}),I=Object.assign(A,{setup(F){const f=u(null),m=u(!1),x={0:"核损",1:"勘验"},C=u([]),i=u({pageNum:1,pageSize:10}),v=u(0),r=()=>{m.value=!0,M(i.value).then(t=>{t.code===200?(C.value=t.rows||[],v.value=t.total||0):l.error(t.msg||"获取数据失败"),m.value=!1})},S=()=>{f.value.openDialog()},D=t=>{f.value.openDialog(t)},N=t=>{w.confirm("确认要启用该结论吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{const a=JSON.parse(JSON.stringify(t));a.status=0,b(a).then(n=>{n.code===200?(l.success("启用成功"),r()):l.error(n.msg||"启用失败")}).catch(()=>{l.error("启用失败")})}).catch(()=>{})},z=t=>{w.confirm("确认要禁用该结论吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{const a=JSON.parse(JSON.stringify(t));a.status=1,b(a).then(n=>{n.code===200?(l.success("禁用成功"),r()):l.error(n.msg||"禁用失败")}).catch(()=>{l.error("禁用失败")})}).catch(()=>{})},B=()=>{r()};return V(()=>{r()}),(t,a)=>{const n=p("el-button"),d=p("el-table-column"),R=p("el-tag"),E=p("el-table"),T=p("el-pagination"),O=$("loading");return g(),j("div",q,[s(n,{type:"primary",onClick:S},{default:o(()=>[c("新增")]),_:1}),P((g(),_(E,{data:C.value,class:"table-container"},{default:o(()=>[s(d,{prop:"type",label:"结论类型",align:"center"},{default:o(e=>[c(k(x[e.row.type]),1)]),_:1}),s(d,{prop:"name",label:"结论内容",align:"center"}),s(d,{prop:"status",label:"状态",align:"center"},{default:o(e=>[s(R,{type:e.row.status===0?"success":"danger"},{default:o(()=>[c(k(e.row.status===0?"启用":"禁用"),1)]),_:2},1032,["type"])]),_:1}),s(d,{prop:"operations",label:"操作",align:"center"},{default:o(e=>[s(n,{type:"primary",onClick:h=>D(e.row)},{default:o(()=>[c("编辑")]),_:2},1032,["onClick"]),e.row.status===1?(g(),_(n,{key:0,type:"success",onClick:h=>N(e.row)},{default:o(()=>[c("启用")]),_:2},1032,["onClick"])):y("",!0),e.row.status===0?(g(),_(n,{key:1,type:"danger",onClick:h=>z(e.row)},{default:o(()=>[c("禁用")]),_:2},1032,["onClick"])):y("",!0)]),_:1})]),_:1},8,["data"])),[[O,m.value]]),v.value>0?(g(),_(T,{key:0,class:"pagination",total:v.value,"current-page":i.value.pageNum,"onUpdate:currentPage":a[0]||(a[0]=e=>i.value.pageNum=e),"page-size":i.value.pageSize,"onUpdate:pageSize":a[1]||(a[1]=e=>i.value.pageSize=e),onCurrentChange:r,onSizeChange:r,layout:"total, sizes, prev, pager, next, jumper"},null,8,["total","current-page","page-size"])):y("",!0),s(J,{ref_key:"resurveyConclusionDialogRef",ref:f,onRefresh:B},null,512)])}}}),K=L(I,[["__scopeId","data-v-2365cfc0"]]);export{K as default};
