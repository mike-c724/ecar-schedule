import{i as F}from"./useOrderInfo-oTm2EOs0.js";import{_ as V,r as d,a0 as A,g as e,o as l,l as h,w as i,c as p,f as n,e as v,x as B,F as S,C as z,h as I,z as L,am as N}from"./index-Bz8aCySx.js";const O={key:0},P={key:1},T={class:"photo-list-title"},Z={class:"photo-list-actions"},E=L({name:"UploadVehicleDamageZip"}),R=Object.assign(E,{props:{visibleDamageAssessment:{type:Boolean,required:!1},uploadType:{type:String,default:"2"},title:{type:String,default:"上传定损信息照片ZIP包"},description:{type:String,default:"照片列表（请手动标记行驶证和仪表盘）"}},emits:["update:visibleDamageAssessment","success"],setup(o,{emit:g}){const u=o,m=g,t=d([]),s=d(null),c=d(!1),y=`/prod-api/order/common/up-zip/${u.uploadType}/`+F.value;function w(a){t.value=a,N.success("上传成功"),_()}const _=async()=>{m("success",t.value),f()};function f(){m("update:visibleDamageAssessment",!1),c.value=!1,t.value=[],s.value&&s.value.clearFiles()}return A(()=>u.visibleDamageAssessment,a=>{a||(c.value=!1,t.value=[],s.value&&s.value.clearFiles())}),(a,j)=>{const b=e("FileUpload"),x=e("el-image"),k=e("el-col"),D=e("el-row"),U=e("el-button"),C=e("el-dialog");return l(),h(C,{"model-value":o.visibleDamageAssessment,title:o.title,width:"90%",onClose:f,"destroy-on-close":""},{default:i(()=>[c.value?(l(),p("div",P,[v("div",T,B(o.description),1),n(D,{gutter:12,class:"photo-list"},{default:i(()=>[(l(!0),p(S,null,z(t.value,(r,q)=>(l(),h(k,{key:r.url,span:6,class:"photo-item"},{default:i(()=>[n(x,{src:r.photoOriginal,fit:"contain",style:{width:"100%",height:"200px","border-radius":"6px",border:"1px solid #eee"},"preview-src-list":[r.photoOriginal]},null,8,["src","preview-src-list"])]),_:2},1024))),128))]),_:1}),v("div",Z,[n(U,{type:"primary",onClick:_},{default:i(()=>[I("添加照片")]),_:1})])])):(l(),p("div",O,[n(b,{ref_key:"fileUploadRef",ref:s,"file-type":["zip"],"file-size":200,limit:1,"is-show-tip":!0,uploadFileUrl:y,"show-file-list":!0,"onUpdate:modelValue":w},null,512)]))]),_:1},8,["model-value","title"])}}}),G=V(R,[["__scopeId","data-v-c3a93ae3"]]);export{G as default};
