import{r as i,a as O,b as B,g as R,o as g,c as f,f as _,w as c,h as V,m as y,z as I}from"./index-Bz8aCySx.js";import{F as M}from"./index-Cj0gErN3.js";import{f as w}from"./createDetectionOrder-vi0LEaf-.js";const j={class:"app-container"},q=["src","onClick"],S=["src","onClick"],E=I({name:"CreateOrderList"}),J=Object.assign(E,{setup(F){const b=i(null),L=O(),x=i([{type:"input",label:"VIN码",prop:"vinCode",placeholder:"请输入VIN码",clearable:!0}]),N=i([{type:"index",label:"序号",align:"center"},{prop:"orderNumber",label:"订单编号",align:"center"},{prop:"vinCode",label:"VIN码",align:"center"},{prop:"plateNumber",label:"车牌号",align:"center"},{prop:"drivingLicense",label:"行驶证",align:"center",slot:"drivingLicense"},{prop:"registrationCertificate",label:"登记证",align:"center",slot:"registrationCertificate"},{prop:"createTime",label:"创建时间",align:"center"},{prop:"detectionPlan",label:"检测方案",align:"center"}]),k=i([]),T=i(async a=>{const{vinCode:l,createTime:o,...r}=a||{},s={...r,queryStatus:7};l&&(s.vin=l),Array.isArray(o)&&o.length===2&&(s.submitStartTime=o[0],s.submitEndTime=o[1]);const t=await w(s),h=(t&&(t.rows||t.data&&t.data.rows)||[]).map(e=>{var v,C;const n=((v=e==null?void 0:e.orderBase)==null?void 0:v.drivingLicenseInfo)||{},d=((C=e==null?void 0:e.orderBase)==null?void 0:C.registrationCertificateInfo)||{},p=(n==null?void 0:n.drivingLicensePhotoA)||{},u=(d==null?void 0:d.registrationCertificatePhotoA)||{};return{id:e.orderId,orderNumber:e.orderNo,vinCode:n.vin||e.vin||"",plateNumber:n.licensePlate||e.licensePlate||"",drivingLicense:p.photoMiddle||p.photoBig||p.photoOriginal||"",registrationCertificate:u.photoMiddle||u.photoBig||u.photoOriginal||"",createTime:e.createTime||e.submitTime||"",detectionPlan:e.planName||""}}),A=t&&(t.total||t.data&&t.data.total)||h.length;return{code:t&&t.code||200,rows:h,total:A}}),m=a=>{window.open(a,"_blank")},P=()=>{L.push("/evaluationManagement/createDetectionOrder")};return B(async()=>{try{await w({queryStatus:7})}catch{}b.value.getList()}),(a,l)=>{const o=R("el-button");return g(),f("div",j,[_(M,{ref_key:"formTableRef",ref:b,"form-config":x.value,"table-columns":N.value,operations:k.value,api:T.value,showAdd:!1},{"form-operations-suffix":c(()=>[_(o,{type:"success",onClick:P},{default:c(()=>[V("检测建单")]),_:1})]),"table-drivingLicense":c(({row:r})=>[r.drivingLicense?(g(),f("img",{key:0,src:r.drivingLicense,style:{width:"80px",height:"50px","object-fit":"cover",cursor:"pointer","border-radius":"4px"},onClick:()=>m(r.drivingLicense)},null,8,q)):y("",!0)]),"table-registrationCertificate":c(({row:r})=>[r.registrationCertificate?(g(),f("img",{key:0,src:r.registrationCertificate,style:{width:"80px",height:"50px","object-fit":"cover",cursor:"pointer","border-radius":"4px"},onClick:()=>m(r.registrationCertificate)},null,8,S)):y("",!0)]),_:1},8,["form-config","table-columns","operations","api"])])}}});export{J as default};
