import{P as y,_ as z,r as f,v as L,a0 as N,g as s,o as d,l as w,w as l,c as h,f as a,F as R,C as j,e as v,h as m,am as C,p as q,q as E}from"./index-Bz8aCySx.js";function Y(e){return y({url:"/order/api/online-orders/list",method:"get",params:e})}function ee(e){return y({url:`/order/pdf/download-pdf/insurance/${e}`,method:"get",timeout:6e4})}function M(e){return y({url:"/order/api/orders-claims-settlement/sub",method:"post",data:e})}const Z=e=>(q("data-v-78286d10"),e=e(),E(),e),$={key:0},D={key:1},G=Z(()=>v("div",{class:"photo-list-title"},"照片列表（请手动标记行驶证和仪表盘）",-1)),H={class:"photo-labels"},J={class:"photo-list-actions"},K={__name:"claimAssessment",props:{visibleClaimAssessment:{type:Boolean,required:!1}},emits:["update:visible","createOrder","success"],setup(e,{emit:x}){const U=e,b=x,t=f([]),r=f(null),c=f(!1),V="/prod-api/order/common/up-zip/1";function k(o){t.value=(o||[]).map(p=>({...p,photoType:"10"})),c.value=!0}const A=L(()=>t.value.some(o=>o.photoType==="0")&&t.value.some(o=>o.photoType==="5")),O=async()=>{function o(_){const u=t.value.filter(i=>i.photoType===_);return u.length===1&&u[0]}if(!o("0")){C.error("请确保且仅标记一张行驶证照片");return}if(!o("5")){C.error("请确保且仅标记一张仪表盘照片");return}let p={photos:t.value};await M(p),b("success"),g()};function g(){b("update:visibleClaimAssessment",!1),c.value=!1,t.value=[],console.log("pppp",r.value),r.value&&r.value.clearFiles()}return N(()=>U.visibleClaimAssessment,o=>{o||(c.value=!1,t.value=[],r.value&&r.value.clearFiles())}),(o,p)=>{const _=s("FileUpload"),u=s("el-image"),i=s("el-radio"),T=s("el-radio-group"),F=s("el-col"),S=s("el-row"),B=s("el-button"),I=s("el-dialog");return d(),w(I,{"model-value":e.visibleClaimAssessment,title:"上传线上照片ZIP包",width:"90%",onClose:g,"destroy-on-close":""},{default:l(()=>[c.value?(d(),h("div",D,[G,a(S,{gutter:12,class:"photo-list"},{default:l(()=>[(d(!0),h(R,null,j(t.value,(n,W)=>(d(),w(F,{key:n.url,span:6,class:"photo-item"},{default:l(()=>[a(u,{src:n.photoOriginal,fit:"contain",style:{width:"100%",height:"200px","border-radius":"6px",border:"1px solid #eee"},"preview-src-list":[n.photoOriginal]},null,8,["src","preview-src-list"]),v("div",H,[a(T,{modelValue:n.photoType,"onUpdate:modelValue":P=>n.photoType=P},{default:l(()=>[a(i,{label:"0"},{default:l(()=>[m("行驶证")]),_:1}),a(i,{label:"5"},{default:l(()=>[m("仪表盘")]),_:1}),a(i,{label:"10"},{default:l(()=>[m("定损照片")]),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue"])])]),_:2},1024))),128))]),_:1}),v("div",J,[a(B,{type:"primary",onClick:O,disabled:!A.value},{default:l(()=>[m("创建订单")]),_:1},8,["disabled"])])])):(d(),h("div",$,[a(_,{ref_key:"fileUploadRef",ref:r,"file-type":["zip"],"file-size":200,limit:1,"is-show-tip":!0,uploadFileUrl:V,"show-file-list":!0,"onUpdate:modelValue":k},null,512)]))]),_:1},8,["model-value"])}}},Q=z(K,[["__scopeId","data-v-78286d10"]]),oe=Object.freeze(Object.defineProperty({__proto__:null,default:Q},Symbol.toStringTag,{value:"Module"}));export{Q as C,oe as c,ee as d,Y as t};
