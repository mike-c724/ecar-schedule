import{P as b,_ as N,r as i,g as d,o as g,c as k,f as a,w as s,h as D,i as n,F as O,C as P,l as $,B as z,am as y}from"./index-CBERRbij.js";function Q(c){return b({url:"/product/damageResurvey/page",method:"post",data:c})}function A(c){return b({url:"/product/damageResurvey/add",method:"post",data:c})}function w(c){return b({url:"/product/damageResurvey/edit",method:"post",data:c})}const G={class:"dialog-container"},H={__name:"resurveyConclusionDialog",emits:["refresh"],setup(c,{expose:F,emit:B}){const T=B,u=i(!1),v=i("新增结论"),p=i(null),r=i(!1),f=i(""),t=i({type:"",name:""}),E={type:[{required:!0,message:"请选择结论类型",trigger:"change"}],name:[{required:!0,message:"请输入结论内容",trigger:"blur"}]},L=i([{label:"核损",value:0},{label:"勘验",value:1}]),C=()=>{t.value={type:"",name:""},r.value=!1,f.value="",p.value&&p.value.resetFields()},S=l=>{l&&l.id?(v.value="编辑结论",r.value=!0,f.value=l.id,t.value={...l,type:l.type,name:l.name}):(v.value="新增结论",C()),u.value=!0},U=()=>{u.value=!1},V=l=>{if(l){h(l);return}p.value.validate(e=>{e&&h(t.value)})},h=l=>{const e={...l},_=r.value?w:A;r.value&&f.value&&(e.id=f.value),_(e).then(m=>{m.code===200?(y.success(r.value?"编辑成功":"新增成功"),u.value=!1,T("refresh")):y.error(m.msg||(r.value?"编辑失败":"新增失败"))}).catch(m=>{console.error(m),y.error(r.value?"编辑失败":"新增失败")})},j=()=>{V()};return F({openDialog:S,closeDialog:U,submitForm:V}),(l,e)=>{const _=d("el-option"),m=d("el-select"),R=d("el-form-item"),q=d("el-input"),I=d("el-form"),x=d("el-button"),M=d("el-dialog");return g(),k("div",G,[a(M,{modelValue:n(u),"onUpdate:modelValue":e[3]||(e[3]=o=>z(u)?u.value=o:null),title:n(v),width:"600px",onClosed:C},{footer:s(()=>[a(x,{onClick:e[2]||(e[2]=o=>u.value=!1)},{default:s(()=>[D("取消")]),_:1}),a(x,{type:"primary",onClick:j},{default:s(()=>[D("确认")]),_:1})]),default:s(()=>[a(I,{ref_key:"formRef",ref:p,model:n(t),rules:E,"label-width":"100px"},{default:s(()=>[a(R,{label:"结论类型",prop:"type"},{default:s(()=>[a(m,{modelValue:n(t).type,"onUpdate:modelValue":e[0]||(e[0]=o=>n(t).type=o),placeholder:"请选择"},{default:s(()=>[(g(!0),k(O,null,P(n(L),o=>(g(),$(_,{key:o.value,label:o.label,value:o.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(R,{label:"结论内容",prop:"name"},{default:s(()=>[a(q,{modelValue:n(t).name,"onUpdate:modelValue":e[1]||(e[1]=o=>n(t).name=o),placeholder:"请输入内容",rows:4},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}},J=N(H,[["__scopeId","data-v-dbc37bd7"]]),W=Object.freeze(Object.defineProperty({__proto__:null,default:J},Symbol.toStringTag,{value:"Module"}));export{W as a,w as e,Q as g,J as r};
