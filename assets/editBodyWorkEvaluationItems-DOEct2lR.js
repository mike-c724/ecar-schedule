import{_ as P,r as g,a0 as y,g as v,o as i,l as V,w as r,e as f,f as _,h as I,c as C,F as B,C as E,i as S,x as b,n as T,a_ as U}from"./index-Bz8aCySx.js";import{e as c,g as A,i as j,B as F}from"./useOrderInfo-oTm2EOs0.js";const G={class:"dialog-body"},O={class:"dialog-footer"},R={__name:"editBodyWorkEvaluationItems",props:{modelValue:{type:Boolean,default:!1}},emits:["update:modelValue","confirm"],setup(D,{emit:L}){const h=D,k=L,d=g(h.modelValue),s=g({}),W=()=>{var o,a;s.value={},(a=(o=c.value.assessmentPhotoList)==null?void 0:o[A.value].assessmentSelectInfoList)==null||a.forEach(l=>{s.value[l.productAssessmentId]=l.assessmentEvaluationCriteriaId})};y(()=>h.modelValue,o=>{d.value=o,W()}),y(()=>d.value,o=>{k("update:modelValue",o)});const w=()=>{d.value=!1},x=(o,a,l)=>{s.value[a]===l?s.value[a]=void 0:s.value[a]=l},N=()=>{var m,u,p,t;const o=Object.entries(s.value).filter(([e,n])=>n!==void 0).map(([e,n])=>n),a=Object.entries(s.value).filter(([e,n])=>n!==void 0).map(([e,n])=>({assessmentEvaluationCriteriaId:n,productAssessmentId:e}));let l={partsId:(m=c.value)==null?void 0:m.partsId,assessmentEvaluationCriteriaId:o,detectionType:(u=c.value)==null?void 0:u.detectionType,orderBearingDetectionEvaluationId:(t=(p=c.value)==null?void 0:p.assessmentPhotoList)==null?void 0:t[A.value].orderEvaluationId,orderId:j.value};U(l).then(e=>{F(a),k("confirm",a)}),d.value=!1};return(o,a)=>{const l=v("el-radio"),m=v("el-radio-group"),u=v("el-button"),p=v("el-dialog");return i(),V(p,{modelValue:d.value,"onUpdate:modelValue":a[0]||(a[0]=t=>d.value=t),title:"编辑评测项",width:"50%"},{footer:r(()=>[f("span",O,[_(u,{onClick:w},{default:r(()=>[I("取消")]),_:1}),_(u,{type:"primary",onClick:N},{default:r(()=>[I("确定")]),_:1})])]),default:r(()=>[f("div",G,[(i(!0),C(B,null,E(S(c).assessmentInfoList,t=>(i(),C("div",{key:t.productAssessmentId},[f("h3",null,b(t.assessmentName),1),_(m,{modelValue:s.value[t.productAssessmentId],"onUpdate:modelValue":e=>s.value[t.productAssessmentId]=e,onChange:e=>o.handleRadioChange(e,t.productAssessmentId)},{default:r(()=>[(i(!0),C(B,null,E(t.evaluationCriteriaList,e=>(i(),V(l,{key:e.assessmentEvaluationCriteriaId,value:e.assessmentEvaluationCriteriaId,label:e.assessmentEvaluationCriteriaId,onClick:T(n=>x(n,t.productAssessmentId,e.assessmentEvaluationCriteriaId),["prevent"])},{default:r(()=>[I(b(e.damageDescription),1)]),_:2},1032,["value","label","onClick"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])]))),128))])]),_:1},8,["modelValue"])}}},M=P(R,[["__scopeId","data-v-76eba0d6"]]);export{M as default};
