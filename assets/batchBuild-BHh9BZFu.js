import{_ as I,r as _,a0 as L,g as l,o as s,l as m,w as a,c as f,f as i,F as S,C as V,e as y,h as b,p as N,q}from"./index-Bz8aCySx.js";const z=e=>(N("data-v-3b1433fb"),e=e(),q(),e),A={key:0},P={key:1},R=z(()=>y("div",{class:"photo-list-title"},"上传失败照片",-1)),E={class:"photo-list-actions"},O={__name:"batchBuild",props:{visiblebatchBuild:{type:Boolean,required:!1}},emits:["update:visible","createOrder","success"],setup(e,{emit:w}){const g=e,h=w,c=_([]),t=_(null),r=_(!1),B="/prod-api/order/api/orders-protect-before/batch-sub";function k(o){const p=Array.isArray(o)?o.filter(d=>d.success==0):[];c.value=p,r.value=p.length>0,p.length||n(),h("success")}function n(){h("update:visiblebatchBuild",!1),r.value=!1,c.value=[],console.log("pppp",t.value),t.value&&t.value.clearFiles()}return L(()=>g.visiblebatchBuild,o=>{o||(r.value=!1,c.value=[],t.value&&t.value.clearFiles())}),(o,p)=>{const d=l("FileUpload"),x=l("el-image"),U=l("el-col"),C=l("el-row"),v=l("el-button"),F=l("el-dialog");return s(),m(F,{"model-value":e.visiblebatchBuild,title:"上传照片ZIP包",width:"90%",onClose:n,"destroy-on-close":""},{default:a(()=>[r.value?(s(),f("div",P,[R,i(C,{gutter:12,class:"photo-list"},{default:a(()=>[(s(!0),f(S,null,V(c.value,(u,T)=>(s(),m(U,{key:u.url,span:6,class:"photo-item"},{default:a(()=>[i(x,{src:u.photoUrl,fit:"contain",style:{width:"100%",height:"200px","border-radius":"6px",border:"1px solid #eee"},"preview-src-list":[u.photoUrl]},null,8,["src","preview-src-list"])]),_:2},1024))),128))]),_:1}),y("div",E,[i(v,{type:"primary",onClick:n},{default:a(()=>[b("下载失败照片")]),_:1}),i(v,{type:"primary",onClick:n},{default:a(()=>[b("确认")]),_:1})])])):(s(),f("div",A,[i(d,{ref_key:"fileUploadRef",ref:t,"file-type":["zip"],"file-size":200,limit:1,"is-show-tip":!0,uploadFileUrl:B,"show-file-list":!0,"onUpdate:modelValue":k},null,512)]))]),_:1},8,["model-value"])}}},j=I(O,[["__scopeId","data-v-3b1433fb"]]);export{j as default};
